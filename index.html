<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OWLOG</title>
    <link rel="icon" type="image/png" href="./fav/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="./fav/favicon.svg" />
    <link rel="shortcut icon" href="./fav/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="scanner.js" />
    <meta name="apple-mobile-web-app-title" content="OwLog" />
    <link rel="manifest" href="./fav/site.webmanifest" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #ffffff;
            color: #1a1a1a;
            -webkit-tap-highlight-color: transparent;
        }

        .tab-active {
            border-bottom: 2px solid #000;
            color: #000;
            font-weight: 700;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* PC 그리드 전환 시 간격 보정 */
        @media (min-width: 768px) {
            #content-ranking.grid {
                gap: 1rem;
            }
        }

        /* Cropper.js 커스텀 스타일 */
        .cropper-view-box {
            outline: 2px solid black;
            /* 선택 영역 테두리를 검은색으로 */
            outline-color: rgba(255, 255, 255, 0.75);
            border-radius: 4px;
        }

        .cropper-line {
            background-color: rgb(37, 255, 9);
        }

        .cropper-point {
            background-color: rgb(6, 255, 19);
            width: 8px;
            height: 8px;
            border-radius: 2px;
            /* 도트 느낌을 위해 살짝만 둥글게 */
        }

        /* 배경 격자무늬 제거 및 반투명 검정 설정 */
        .cropper-modal {
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0.8;
        }

        .cropper-bg {
            background-image: none !important;
            background-color: #f9fafb !important;
            /* gray-50 */
        }
        /* 국가 선택창 너비 고정 및 말줄임표 설정 */
    #userRegion {
        max-width: 110px; /* 너비 고정 */
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
        display: inline-block;
    }
    
    /* 드롭다운 내부 옵션들도 브라우저 지원에 따라 말줄임 적용 시도 */
    #userRegion option {
        text-overflow: ellipsis;
        overflow: hidden;
    }
    </style>
</head>

<body class="min-h-screen flex flex-col pb-20">

    <header class="flex justify-between items-center px-4 py-3 border-b border-gray-100 bg-white sticky top-0 z-50">
        <button onclick="openScanner()"
            class="w-10 h-10 flex items-center justify-center hover:bg-gray-50 rounded-full transition-all active:scale-90"
            aria-label="Add Record">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-gray-900" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
        </button>
        <div class="flex items-center gap-1.5 cursor-pointer" onclick="switchTab('home')">
            <h1 class="text-2xl md:text-3xl font-black tracking-tighter text-black">
                OWLOG
            </h1>

            <span
                class="bg-red-500 text-white text-[9px] md:text-[10px] font-black px-1.5 py-0.5 rounded-md uppercase tracking-tighter leading-none mb-1 md:mb-2">
                Beta
            </span>
        </div>
        <div class="flex items-center gap-2 text-xs font-bold text-gray-400">
            <button onclick="changeLang('en')" id="btn-en" class="transition px-1 uppercase">EN</button>
            <span class="text-gray-200">|</span>
            <button onclick="changeLang('ko')" id="btn-ko" class="transition px-1">KO</button>
        </div>
    </header>

    <main class="flex-grow flex flex-col px-6 md:px-10 pt-10 max-w-md md:max-w-4xl mx-auto w-full transition-all">

        <div id="section-home">
            <div class="w-full relative mb-6 md:mb-8">
                <input type="text" data-i18n-placeholder="placeholder_search"
                    class="w-full px-5 py-3.5 md:py-4 bg-gray-50 border border-gray-100 rounded-xl md:rounded-2xl focus:outline-none focus:ring-2 focus:ring-gray-100 transition text-sm md:text-base font-medium">
                <button class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-300 hover:text-black">
                    <i class="fa-solid fa-magnifying-glass md:text-lg"></i>
                </button>
            </div>

            <div class="w-full">
                <div class="flex border-b border-gray-100 mb-6">
                    <button id="home-tab-ranking" onclick="switchHomeTab('ranking')"
                        class="flex-1 py-4 text-center text-[13px] md:text-sm tab-active transition-all"
                        data-i18n="tab_ranking">
                        Ranking
                    </button>

                    <button id="home-tab-guide" onclick="switchHomeTab('guide')"
                        class="flex-1 py-4 text-center text-[13px] md:text-sm text-gray-400 font-medium transition-all"
                        data-i18n="how_to_register">
                        How to Register
                    </button>
                </div>

                <div id="content-ranking" class="mt-4 space-y-2 md:space-y-0 md:grid md:grid-cols-2 md:gap-4">
                    <div class="flex flex-col items-center justify-center py-10 opacity-50 md:col-span-2">
                        <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-black mb-2"></div>
                        <p class="text-[11px] font-bold" data-i18n="msg_loading">Checking Live Ranking...</p>
                    </div>
                </div>

                <div id="content-guide" class="mt-6 hidden space-y-6">
                    <div class="px-2">
                        <h2 class="text-xl md:text-2xl font-black tracking-tight" data-i18n="guide_title">How to
                            Register</h2>
                        <p class="text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-widest"
                            data-i18n="guide_subtitle">Follow these 3 steps</p>
                    </div>

                    <div class="space-y-3 md:space-y-4 md:grid md:grid-cols-2 md:gap-4">
                        <div class="p-4 md:p-6 bg-gray-50 rounded-2xl border border-gray-100 flex gap-4 md:col-span-2">
                            <span
                                class="flex-shrink-0 w-6 h-6 bg-black text-white text-[10px] font-black rounded-full flex items-center justify-center">1</span>
                            <div>
                                <p class="font-bold text-sm md:text-base" data-i18n="guide_step1_title">결과 화면 캡쳐</p>
                                <p class="text-xs text-gray-500 mt-1 md:text-sm" data-i18n="guide_step1_desc">게임 종료 후
                                    나타나는 통계 화면을 전체화면으로 캡쳐하세요.</p>
                            </div>
                        </div>

                        <div class="p-4 md:p-6 bg-gray-50 rounded-2xl border border-gray-100 flex gap-4">
                            <span
                                class="flex-shrink-0 w-6 h-6 bg-black text-white text-[10px] font-black rounded-full flex items-center justify-center">2</span>
                            <div>
                                <p class="font-bold text-sm md:text-base" data-i18n="guide_step2_title">스캐너 업로드</p>
                                <p class="text-xs text-gray-500 mt-1 md:text-sm" data-i18n="guide_step2_desc">하단의 '+'
                                    버튼을 눌러 이미지를 선택하면 자동으로 데이터가 입력됩니다.</p>
                                <div
                                    class="mt-4 overflow-hidden rounded-xl border border-gray-200 bg-white p-1 shadow-sm">
                                    <img src="images/r_ex.png" alt="Crop Guide" class="w-full h-auto rounded-lg">
                                </div>
                            </div>
                        </div>

                        <div class="p-4 md:p-6 bg-gray-50 rounded-2xl border border-gray-100 flex gap-4">
                            <span
                                class="flex-shrink-0 w-6 h-6 bg-black text-white text-[10px] font-black rounded-full flex items-center justify-center">3</span>
                            <div>
                                <p class="font-bold text-sm md:text-base" data-i18n="guide_step3_title">기록 저장</p>
                                <p class="text-xs text-gray-500 mt-1 md:text-sm" data-i18n="guide_step3_desc">닉네임과 국가를
                                    확인한 후 'Save Record'를 눌러 랭킹에 등록하세요.</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-4 md:p-5 rounded-2xl bg-red-50 border border-red-100">
                        <div class="flex items-center gap-2 mb-1">
                            <i class="fa-solid fa-circle-exclamation text-red-500 text-xs md:text-sm"></i>
                            <h3 class="font-black text-[11px] md:text-xs text-red-500 uppercase">Attention</h3>
                        </div>
                        <p class="text-[11px] md:text-xs text-red-400 leading-relaxed" data-i18n="guide_note">
                            이미지가 너무 어둡거나 글자가 가려진 경우 인식이 정확하지 않을 수 있습니다. 이 경우 수동으로 수정이 가능합니다.
                        </p>
                    </div>
                </div>
            </div>

            <div class="mt-12 flex flex-col items-center gap-3 md:gap-5">
                <p class="text-gray-400 text-[11px] md:text-xs font-medium text-center leading-relaxed"
                    data-i18n="main_desc"></p>
                <button onclick="openScanner()" data-i18n="btn_register"
                    class="bg-black text-white px-10 py-3 md:px-16 md:py-4 rounded-xl md:rounded-2xl text-xs md:text-sm font-bold shadow-md active:scale-95 transition">
                </button>
            </div>
        </div>
        <!-- 랭킹 섹션 -->
        <div id="section-ranking" class="hidden mt-4 pb-20">
            <div class="px-2 mb-10">
                <h2 class="text-4xl md:text-5xl font-black tracking-tighter uppercase mb-2" data-i18n="rank_page_title">
                    Ranking</h2>
                <p class="text-sm md:text-base font-bold text-gray-400" data-i18n="rank_page_subtitle">전세계 랭킹을 확인해보세요.
                </p>
            </div>

            <div class="flex flex-col gap-3 mb-8 px-1">
                <div class="relative w-full">
                    <select id="detailed-filter-hero" onchange="handleRankFilterChange()"
                        class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-5 py-4 text-sm font-bold appearance-none outline-none focus:ring-2 focus:ring-black transition-all cursor-pointer">
                        <option value="" data-i18n="filter_all_heroes">All Heroes</option>
                    </select>
                    <i
                        class="fa-solid fa-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-gray-300 pointer-events-none"></i>
                </div>

                <div class="flex gap-2">
                    <div class="relative flex-1">
                        <select id="detailed-filter-level" onchange="handleRankFilterChange()"
                            class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-5 py-4 text-sm font-bold appearance-none outline-none focus:ring-2 focus:ring-black transition-all cursor-pointer">
                            <option value="" data-i18n="filter_all_levels">All Levels</option>
                        </select>
                        <i
                            class="fa-solid fa-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-gray-300 pointer-events-none"></i>
                    </div>
                    <div class="relative flex-1">
                        <select id="detailed-filter-region" onchange="handleRankFilterChange()"
                            class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-5 py-4 text-sm font-bold appearance-none outline-none focus:ring-2 focus:ring-black transition-all cursor-pointer">
                            <option value="" data-i18n="label_region">All Regions</option>
                        </select>
                        <i
                            class="fa-solid fa-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-gray-300 pointer-events-none"></i>
                    </div>
                </div>
            </div>


            <div id="rank-main-loader" class="flex flex-col items-center justify-center py-20">
                <div class="relative w-12 h-12">
                    <div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div>
                    <div class="absolute inset-0 border-4 border-t-black rounded-full animate-spin"></div>
                </div>
                <p class="mt-4 text-[10px] font-black text-gray-400 uppercase tracking-widest animate-pulse">Syncing
                    Database...</p>
            </div>

            <div id="rank-main-content" class="hidden">
                <div id="detailed-rank-list" class="space-y-3 md:space-y-0 md:grid md:grid-cols-2 md:gap-4"></div>
                <div id="detailed-rank-pagination" class="mt-12 flex justify-center items-center gap-2"></div>
            </div>
        </div>
        <!-- 랭킹 끝 -->
        <div id="section-guide" class="hidden mt-4 py-20 text-center px-6">
            <h3 class="text-2xl md:text-4xl font-black tracking-tighter uppercase mb-4 text-slate-900"
                data-i18n="guide_pending_title">
                Please wait a moment!
            </h3>

            <p class="text-xs md:text-sm font-bold text-gray-400 leading-relaxed tracking-wide"
                data-i18n="guide_pending_desc">
                Full Guide Details (Pending)
            </p>

            <div class="mt-8 flex justify-center">
                <img src="heroes/Yoiko.webp" alt="Yoiko" class="w-40 h-auto rounded-xl object-cover"
                    style="object-position: center 20%;">
            </div>
        </div>
        <!-- 검색기록-->
        <div id="section-search" class="hidden mt+4">

            <div id="search-loading-view"
                class="flex flex-col items-center justify-center min-h-[400px] bg-white rounded-[32px]">
                <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-black mb-4"></div>
                <p class="text-sm font-black uppercase tracking-widest text-gray-400" data-i18n="msg_loading">Syncing
                    User Data...</p>
            </div>

            <div id="search-results-view" class="hidden">
                <div
                    class="relative p-5 md:p-8 bg-gray-50 rounded-[32px] border border-gray-100 flex flex-row items-center gap-4 md:gap-8 mb-6 md:mb-10 overflow-hidden">

                    <div id="search-profile-img"
                        class="w-20 h-20 md:w-28 md:h-28 rounded-2xl bg-white border border-gray-100 overflow-hidden shadow-sm flex-shrink-0">
                    </div>

                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-0.5 md:mb-1">
                            <h3 id="search-user-id" class="text-xl md:text-3xl font-black tracking-tighter truncate">---
                            </h3>
                            <div id="search-user-flag"
                                class="w-4 h-3 md:w-5 md:h-3.5 rounded-sm overflow-hidden shadow-sm flex-shrink-0">
                            </div>
                        </div>

                        <p id="search-user-region"
                            class="text-[9px] md:text-xs font-black text-blue-500 uppercase tracking-widest mb-3 md:mb-5">
                            ---</p>

                        <div class="flex gap-4 md:gap-10">
                            <div>
                                <p class="text-[8px] md:text-[10px] font-bold text-gray-400 uppercase mb-0.5"
                                    data-i18n="label_total_plays">Total</p>
                                <p id="search-total-play"
                                    class="font-black text-sm md:text-lg text-gray-900 leading-none">0</p>
                            </div>
                            <div>
                                <p class="text-[8px] md:text-[10px] font-bold text-gray-400 uppercase mb-0.5"
                                    data-i18n="label_last_record">Last</p>
                                <p id="search-last-update"
                                    class="font-black text-sm md:text-lg text-gray-900 leading-none">---</p>
                            </div>
                        </div>
                    </div>

                    <div class="absolute top-3 right-3 md:static flex items-center gap-0 md:gap-2">
                        <button id="btn-refresh-data"
                            class="w-9 h-9 md:w-10 md:h-10 flex items-center justify-center bg-transparent md:bg-white border-none md:border md:border-gray-200 md:shadow-sm rounded-xl text-gray-400 hover:text-black transition-all active:scale-90 group">
                            <i
                                class="fa-solid fa-rotate-right text-xs md:text-sm group-hover:rotate-180 transition-transform duration-500"></i>
                        </button>

                        <button id="btn-share-profile"
                            class="w-9 h-9 md:w-10 md:h-10 flex items-center justify-center bg-transparent md:bg-white border-none md:border md:border-gray-200 md:shadow-sm rounded-xl text-gray-400 hover:text-blue-500 transition-all active:scale-90">
                            <i class="fa-solid fa-share-nodes text-xs md:text-sm"></i>
                        </button>
                    </div>
                </div>

                <div class="flex border-b border-gray-100 mb-8">
                    <button onclick="switchSearchTab('records')" id="search-tab-records"
                        class="flex-1 py-4 text-center text-[13px] md:text-sm tab-active transition-all"
                        data-i18n="tab_search_records">Records</button>
                    <button onclick="switchSearchTab('summary')" id="search-tab-summary"
                        class="flex-1 py-4 text-center text-[13px] md:text-sm text-gray-400 font-medium transition-all"
                        data-i18n="tab_search_stats">Stats</button>
                </div>

                <div id="search-records-view">
                    <div id="search-content-records" class="space-y-3 md:grid md:grid-cols-2 md:gap-4 md:space-y-0">
                    </div>
                    <div id="search-pagination" class="mt-12 flex justify-center items-center gap-2">
                    </div>
                </div>

                <div id="search-content-summary" class="hidden space-y-3">
                </div>
            </div>
        </div>

    </main>

    <nav
        class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t border-gray-100 px-4 pt-2 pb-3 z-50">
        <div class="max-w-md md:max-w-4xl mx-auto flex justify-around items-center">
            <a href="javascript:void(0)" onclick="switchTab('home')" id="nav-home"
                class="flex flex-col items-center gap-0.5 px-4 text-black transition-colors">
                <i class="fa-solid fa-house text-lg"></i>
                <span class="text-[10px] font-bold uppercase tracking-tighter" data-i18n="nav_home">Home</span>
            </a>
            <a href="javascript:void(0)" onclick="switchTab('ranking')" id="nav-rank"
                class="flex flex-col items-center gap-0.5 px-4 text-gray-300 transition-colors">
                <i class="fa-solid fa-trophy text-lg"></i>
                <span class="text-[10px] font-bold uppercase tracking-tighter" data-i18n="nav_rank">Rank</span>
            </a>
            <a href="javascript:void(0)" onclick="switchTab('guide')" id="nav-guide"
                class="flex flex-col items-center gap-0.5 px-4 text-gray-300 transition-colors">
                <i class="fa-solid fa-book text-lg"></i>
                <span class="text-[10px] font-bold uppercase tracking-tighter" data-i18n="nav_guide">Guide</span>
            </a>
        </div>
    </nav>

    <div id="scannerModal" class="fixed inset-0 bg-white z-[100] hidden overflow-y-auto no-scrollbar">
        <header class="flex justify-between items-center px-4 py-3 border-b border-gray-100 bg-white sticky top-0">
            <button onclick="closeScanner()"
                class="w-10 h-10 flex items-center justify-center hover:bg-gray-50 rounded-full transition">
                <i class="fa-solid fa-xmark text-lg"></i>
            </button>
            <h1 class="text-lg font-black tracking-tighter uppercase" data-i18n="scanner_title">DATA SCANNER</h1>
            <div class="w-10"></div>
        </header>

        <main class="px-6 pt-6 md:pt-10 max-w-md md:max-w-2xl mx-auto w-full pb-20">
            <section class="text-center mb-6">
                <label for="imageInput"
                    class="cursor-pointer inline-flex flex-row items-center justify-center gap-3 w-full p-4 md:p-8 border-2 border-dashed border-gray-200 rounded-2xl hover:bg-gray-50 transition">
                    <i class="fa-solid fa-camera text-xl md:text-3xl text-gray-300"></i>
                    <span class="text-sm md:text-base font-bold text-gray-500" data-i18n="scanner_upload">Select
                        Screenshot</span>
                    <input type="file" id="imageInput" accept="image/*" class="hidden">
                </label>
                <p id="status" class="mt-3 text-[10px] md:text-xs font-bold text-blue-500 tracking-tight uppercase"
                    data-i18n="scanner_ready">Ready</p>
            </section>

            <section class="bg-gray-50 p-5 md:p-8 rounded-3xl mb-6 shadow-inner">
                <h3 class="text-[10px] md:text-xs font-black text-gray-400 mb-4 tracking-widest uppercase">User & Match
                    Info</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center text-sm md:text-base">
                        <span class="font-bold text-gray-400" data-i18n="label_userid">User ID</span>
                        <input type="text" id="userNickname" data-i18n-placeholder="placeholder_nickname"
                            class="w-40 md:w-60 bg-white px-3 py-2 rounded-xl border-none shadow-sm font-bold focus:ring-2 focus:ring-gray-200 outline-none text-right text-xs md:text-sm">
                    </div>
                    <div class="flex justify-between items-center text-sm md:text-base">
                        <span class="font-bold text-gray-400" data-i18n="label_region">Region</span>
                        <select id="userRegion"
                            class="bg-white px-3 py-2 rounded-xl border-none shadow-sm text-right font-bold text-xs md:text-sm text-gray-800 outline-none cursor-pointer min-w-[100px]"></select>
                    </div>
                    <hr class="border-gray-200 my-2">
                    <div class="flex justify-between items-center text-sm">
                        <span class="font-bold text-gray-500" data-i18n="label_char">Character</span>
                        <select id="resName"
                            class="font-bold px-2 py-1 bg-white rounded-lg shadow-sm border-none text-xs text-right cursor-pointer min-w-[80px]"></select>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="font-bold text-gray-500" data-i18n="label_time">Time</span>
                        <span id="resTime" class="font-bold px-3 py-1 bg-white rounded-lg shadow-sm text-xs">-</span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="font-bold text-gray-500" data-i18n="label_level">Anguish</span>
                        <span id="resLevel"
                            class="font-bold px-3 py-1 bg-white rounded-lg shadow-sm text-red-500 text-xs">-</span>
                    </div>
                    <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                        <span class="font-black text-gray-900 md:text-lg" data-i18n="label_score">Total Score</span>
                        <span id="resTotal" class="text-lg md:text-2xl font-black text-black">0</span>
                    </div>
                </div>
            </section>

            <button id="saveBtn" onclick="saveRecord()" disabled data-i18n="btn_save"
                class="w-full bg-black text-white py-4 md:py-5 rounded-2xl font-black text-sm md:text-base shadow-xl active:scale-95 transition disabled:bg-gray-300 disabled:cursor-not-allowed">
                Save Record
            </button>

            <div class="mt-8 opacity-0 pointer-events-none h-0">
                <canvas id="previewCanvas"></canvas>
                <canvas id="nameDebugCanvas"></canvas>
            </div>
        </main>
    </div>
    <div id="cropModal"
        class="hidden fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex flex-col items-center justify-center p-4">
        <div
            class="w-full max-w-xl bg-white rounded-[32px] overflow-hidden shadow-2xl flex flex-col ring-1 ring-black/5">

            <div class="px-6 py-5 border-b border-gray-100 flex justify-between items-center bg-white">
                <div>
                    <h3 class="font-black uppercase tracking-tighter text-lg text-slate-900">Crop Image</h3>
                    <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Select data area</p>
                </div>
                <button onclick="closeCropModal()"
                    class="w-9 h-9 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 hover:text-black transition-all">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="relative flex-1 bg-slate-50 min-h-[300px] max-h-[60vh] overflow-hidden">
                <img id="cropTarget" src="" class="max-w-full block">
            </div>

            <div class="px-6 py-4 bg-gray-50/50 border-t border-gray-100 flex gap-3">
                <button onclick="confirmCrop()"
                    class="flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-bold text-[13px] uppercase tracking-widest active:scale-95 transition-all shadow-md shadow-blue-100">
                    Scan Selected Area
                </button>
            </div>
        </div>
    </div>

    <div id="debug-panel" class="hidden mt-8 p-4 bg-slate-900 rounded-2xl text-[10px] text-green-400 font-mono">
        <canvas id="nameDebugCanvas" class="hidden"></canvas>
        <pre id="debug-raw-text"></pre>
    </div>
    <script src="script.js"></script>
    <script src="scanner.js"></script>
</body>

</html>